{
  "identifier": "@local:001-data-analyst-was-fehlt-was-muss-rein",
  "name": "001 Data Analyst was fehlt was muss rein",
  "changed": true,
  "operation": {
    "fields": [
      {
        "key": "llm.prediction.systemPrompt",
        "value": "Hilf mir beim Features Engeneering. \n1. Welcche Spalten Fehlen in diesem Datensatz , liste sie mit Datentyp auf.\n2. Welche Spalten un dTabellen kann ich selbst nioch berechnen? Liste sie mit Selbsterklärendem Spaltennahmen , Datentyp un dFormel auf.\n\n\nHier die Tabellenstrucktur:\n{\n  \"tables\": {\n    \"cards_data\": {\n      \"columns\": {\n        \"id\": \"INTEGER\",\n        \"kunden_id\": \"INTEGER\",\n        \"kartenmarke\": \"TEXT\",\n        \"kartentyp\": \"TEXT\",\n        \"kartennummer\": \"TEXT\",\n        \"cvv\": \"INTEGER\",\n        \"hat_chip\": \"BOOLEAN\",\n        \"anzahl_ausgestellter_karten\": \"INTEGER\",\n        \"kredit_limit\": \"CURRENCY\",\n        \"jahr_letzte_pin_änderung\": \"INTEGER\",\n        \"ablauf_monat\": \"INTEGER\",\n        \"ablauf_jahr\": \"INTEGER\",\n        \"konto_eröffnungsmonat\": \"INTEGER\",\n        \"konto_eröffnungsjahr\": \"INTEGER\"\n      },\n      \"primary_key\": \"id\"\n    },\n    \"transactions_data\": {\n      \"columns\": {\n        \"ID\": \"INTEGER\",\n        \"UTC\": \"datetime\",\n        \"Client_ID\": \"INTEGER\",\n        \"Karten_ID\": \"INTEGER\",\n        \"Betrag\": \"CURRENCY\",\n        \"Chip_verwenden\": \"text\",\n        \"Händler_ID\": \"INTEGER\",\n        \"Händlerstadt\": \"TEXT\",\n        \"Händlerbundesstaat\": \"TEXT\",\n        \"Postleitzahl\": \"INTEGER\",\n        \"Händlerkategoriecode\": \"INTEGER\",\n        \"Fehler_in_Transaktion\": \"integer\",\n        \"Transaktions_ID\": \"INTEGER\",\n        \"REDFLAG_bestätigter_Betrug\": \"boolean\",\n        \"Total_Transactions_Per_Type\": \"INTEGER\",\n        \"Transaction Type\": \"INTEGER\"\n      },\n      \"primary_key\": \"ID\",\n      \"foreign_keys\": {\n        \"UTC\": \"Datum_Tabelle.Date\",\n        \"Händlerkategoriecode\": \"mcc_codes.mcc\",\n        \"Karten_ID\": \"cards_data.id\",\n        \"Client_ID\": \"users_data.ID\"\n      }\n    },\n    \"users_data\": {\n      \"columns\": {\n        \"ID\": \"INTEGER\",\n        \"aktuelles_Alter\": \"INTEGER\",\n        \"Renteneintrittsalter\": \"INTEGER\",\n        \"Geburtsjahr\": \"INTEGER\",\n        \"Geburtsmonat\": \"INTEGER\",\n        \"Geschlecht\": \"TEXT\",\n        \"Adresse\": \"TEXT\",\n        \"Breitengrad\": \"VARIANT\",\n        \"Längengrad\": \"VARIANT\",\n        \"Pro_Kopf_Einkommen\": \"CURRENCY\",\n        \"Jahreseinkommen\": \"CURRENCY\",\n        \"Gesamtschulden\": \"CURRENCY\",\n        \"FICO-Score\": \"INTEGER\",\n        \"Anzahl_Kreditkarten\": \"INTEGER\",\n        \"REDFLAG_Einkommen\": \"BOOLEAN\",\n        \"Altersgruppe\": \"INTEGER\",\n        \"Fehler_Bestatigter_Betrug\": \"INTEGER\",\n        \"Einkommensklasse_Spalte\": \"INTEGER\"\n      },\n      \"primary_key\": \"ID\"\n    },\n    \"mcc_codes\": {\n      \"columns\": {\n        \"mcc\": \"TEXT\",\n        \"Beschreibung\": \"TEXT\"\n      },\n      \"primary_key\": \"mcc\"\n    },\n    \"Datum_Tabelle\": {\n      \"columns\": {\n        \"Date\": \"datetime\",\n        \"Monatszahl\": \"int\",\n        \"Jahreszahl\": \"int\",\n        \"Tageszahl\": \"int\",\n        \"Wochentag\": \"text\",\n        \"Wochennummer\": \"int\",\n        \"ISO_Wochennummer\": \"int\",\n        \"Quartal\": \"int\",\n        \"Jahreszeit\": \"text\",\n        \"Hell_Dunkel\": \"text\",\n        \"Mondphase\": \"text\",\n        \"zeit_US_Ost\": \"datetime\",\n        \"Zeit_US_West\": \"datetime\",\n        \"Zeit_Moskau\": \"datetime\",\n        \"Zeit_Peking\": \"datetime\"\n\n      },\n      \"primary_key\": UTC\n    }\n  }\n}\n  Beispiel: Kategorie\tNeuer Spaltenname\tBerechnung / Beschreibung\nZeitbasierte Features\tstunde_des_tages\tEXTRACT(HOUR FROM transactions_data.UTC)\nnacht_transaktion\tBOOLEAN: TRUE, falls stunde_des_tages zwischen 0 und 5 Uhr liegt.\nis_wochenende\tBOOLEAN: TRUE, falls Datum_Tabelle.Wochentag IN ('Samstag', 'Sonntag')\nzeit_seit_letzter_tx_kunde\ttransactions_data.UTC - (Letzte Transaktions-UTC desselben Client_ID). Sehr starkes Betrugsmerkmal. (SQL: LAG Window Function)\ntage_bis_kartenablauf\tDatum aus (ablauf_jahr, ablauf_monat) - Datum von transactions_data.UTC\nkartenalter_bei_tx\ttransactions_data.UTC - cards_data.kartenausgabe_datum. Benötigt die oben erwähnte neue Spalte.\nAggregierte Verhaltens-Features (pro Kunde/Karte)\tanzahl_tx_kunde_letzte_24h\tCOUNT(Transaktionen) des Client_ID in den letzten 24 Stunden vor der aktuellen Transaktion.\nsumme_betraege_kunde_letzte_24h\tSUM(Betrag) des Client_ID in den letzten 24 Stunden.\navg_betrag_kunde_historisch\tAVG(Betrag) über alle bisherigen Transaktionen des Client_ID.\nmedian_betrag_kunde_historisch\tMEDIAN(Betrag) über alle bisherigen Transaktionen des Client_ID. (Robuster gegen Ausreißer)\nstddev_betrag_kunde_letzte_30d\tStandardabweichung der Beträge des Client_ID in den letzten 30 Tagen. (Misst die Volatilität)\nanzahl_eindeutiger_mcc_letzte_7d\tCOUNT(DISTINCT Händlerkategoriecode) für den Client_ID in den letzten 7 Tagen.\nanzahl_eindeutiger_städte_letzte_7d\tCOUNT(DISTINCT Händlerstadt) für den Client_ID in den letzten 7 Tagen.\nfehlerhafte_tx_rate_kunde\tAnzahl Transaktionen mit (Fehler_in_Transaktion > 0) / Gesamtzahl Transaktionen des Kunden.\nRelationale & Vergleichs-Features (pro Transaktion)\tbetrag_vs_kreditlimit\ttransactions_data.Betrag / cards_data.kredit_limit\nabweichung_vom_durchschnittsbetrag\t(transactions_data.Betrag - avg_betrag_kunde_historisch) / avg_betrag_kunde_historisch. Eines der wichtigsten Features!\nabweichung_vom_mcc_durchschnitt\t(Aktueller Betrag - AVG(Betrag) für diesen MCC-Code) / AVG(Betrag) für diesen MCC-Code. Normalisiert den Betrag anhand der Händlerkategorie.\nis_neue_stadt_fuer_kunde\tBOOLEAN: TRUE, falls der Kunde noch nie zuvor in dieser Händlerstadt eingekauft hat.\nis_neuer_mcc_fuer_kunde\tBOOLEAN: TRUE, falls der Kunde noch nie zuvor in dieser Händlerkategorie eingekauft hat.\nGeografische Features\tdistanz_tx_zu_wohnort_km\tHaversine-Formel((Händler_Lat, Händler_Lon), (users_data.Breitengrad, users_data.Längengrad)). Benötigt Geocoding der Händler.\nimplizite_reisegeschwindigkeit_kmh\tDistanz zur letzten Transaktion / zeit_seit_letzter_tx_kunde. Ein Wert > 1000 km/h ist ein extrem starkes Betrugssignal (\"Teleportation\").\nNutzer- & Kartendaten-Features\tjahre_seit_pin_änderung\tEXTRACT(YEAR FROM CURRENT_DATE) - cards_data.jahr_letzte_pin_änderung\nalter_bei_kontoeröffnung\tcards_data.konto_eröffnungsjahr - users_data.Geburtsjahr\nschulden_zu_einkommen_ratio\tusers_data.Gesamtschulden / users_data.Jahreseinkommen. (Sicherstellen, dass Jahreseinkommen nicht 0 ist).\nkreditkarten_auslastung_gesamt\tusers_data.Gesamtschulden / (users_data.Anzahl_Kreditkarten * AVG(kredit_limit)). Eine Schätzung der Gesamtauslastung.\njahre_bis_rente\tusers_data.Renteneintrittsalter - users_data.aktuelles_Alter\nfico_abweichung_altersgruppe\tusers_data.FICO-Score - AVG(FICO-Score) FÜR users_data.Altersgruppe. Zeigt, ob der FICO-Score für die Altersgruppe über- oder unterdurchschnittlich ist.\n"
      }
    ]
  },
  "load": {
    "fields": []
  }
}